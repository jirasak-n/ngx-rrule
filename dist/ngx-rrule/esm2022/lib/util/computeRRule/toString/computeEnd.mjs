import { getDateParts, isValidDate } from "../../common";
const computeEnd = (attr) => {
    const end = {};
    if (attr) {
        const { mode, after } = attr;
        const date = attr.onDate.date;
        if (mode === 'After') {
            end.count = after;
        }
        if (mode === 'On date' && isValidDate(date)) {
            const dateParts = getDateParts(date);
            if (dateParts.month !== undefined) {
                end.until = new Date(Date.UTC(dateParts.year, dateParts.month - 1, dateParts.day, 23, 59, 59, 999));
            }
        }
    }
    return end;
};
export default computeEnd;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcHV0ZUVuZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1ycnVsZS9zcmMvbGliL3V0aWwvY29tcHV0ZVJSdWxlL3RvU3RyaW5nL2NvbXB1dGVFbmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLFlBQVksRUFBRSxXQUFXLEVBQUMsTUFBTSxjQUFjLENBQUM7QUFFdkQsTUFBTSxVQUFVLEdBQUcsQ0FBQyxJQUFTLEVBQUUsRUFBRTtJQUMvQixNQUFNLEdBQUcsR0FBUSxFQUFFLENBQUM7SUFFcEIsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNULE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQzdCLE1BQU0sSUFBSSxHQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQy9CLElBQUksSUFBSSxLQUFLLE9BQU8sRUFBRSxDQUFDO1lBQ3JCLEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLENBQUM7UUFFRCxJQUFJLElBQUksS0FBSyxTQUFTLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDNUMsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3JDLElBQUksU0FBUyxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQUUsQ0FBQztnQkFDbEMsR0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsU0FBUyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3RHLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQyxDQUFDO0FBRUYsZUFBZSxVQUFVLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2dldERhdGVQYXJ0cywgaXNWYWxpZERhdGV9IGZyb20gXCIuLi8uLi9jb21tb25cIjtcblxuY29uc3QgY29tcHV0ZUVuZCA9IChhdHRyOiBhbnkpID0+IHtcbiAgY29uc3QgZW5kOiBhbnkgPSB7fTtcblxuICBpZiAoYXR0cikge1xuICAgIGNvbnN0IHsgbW9kZSwgYWZ0ZXIgfSA9IGF0dHI7XG4gICAgY29uc3QgZGF0ZSA9ICBhdHRyLm9uRGF0ZS5kYXRlO1xuICAgIGlmIChtb2RlID09PSAnQWZ0ZXInKSB7XG4gICAgICBlbmQuY291bnQgPSBhZnRlcjtcbiAgICB9XG5cbiAgICBpZiAobW9kZSA9PT0gJ09uIGRhdGUnICYmIGlzVmFsaWREYXRlKGRhdGUpKSB7XG4gICAgICBjb25zdCBkYXRlUGFydHMgPSBnZXREYXRlUGFydHMoZGF0ZSk7XG4gICAgICBpZiAoZGF0ZVBhcnRzLm1vbnRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZW5kLnVudGlsID0gbmV3IERhdGUoRGF0ZS5VVEMoZGF0ZVBhcnRzLnllYXIsIGRhdGVQYXJ0cy5tb250aCAtIDEsIGRhdGVQYXJ0cy5kYXksIDIzLCA1OSwgNTksIDk5OSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlbmQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb21wdXRlRW5kO1xuIl19