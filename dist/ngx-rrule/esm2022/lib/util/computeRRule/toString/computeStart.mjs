import { getDateParts, isValidDate } from '../../common';
const computeStart = (date) => {
    let start = {};
    if (date) {
        if (!date.onDate || !isValidDate(date.onDate.date)) {
            start = new Date().setMilliseconds(0);
        }
        else {
            start = date.onDate.date;
        }
        const dateParts = getDateParts(start);
        if (!dateParts.year || !dateParts.month || !dateParts.day) {
            return null;
        }
        return {
            dtstart: new Date(Date.UTC(dateParts.year, dateParts.month - 1, dateParts.day, 0, 0))
        };
    }
    return start;
};
export default computeStart;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcHV0ZVN0YXJ0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXJydWxlL3NyYy9saWIvdXRpbC9jb21wdXRlUlJ1bGUvdG9TdHJpbmcvY29tcHV0ZVN0YXJ0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxZQUFZLEVBQUUsV0FBVyxFQUFDLE1BQU0sY0FBYyxDQUFBO0FBRXRELE1BQU0sWUFBWSxHQUFHLENBQUMsSUFBUyxFQUFFLEVBQUU7SUFDakMsSUFBSSxLQUFLLEdBQVEsRUFBRSxDQUFDO0lBRXBCLElBQUksSUFBSSxFQUFFLENBQUM7UUFDVCxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDbkQsS0FBSyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLENBQUM7YUFBTSxDQUFDO1lBQ04sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQzNCLENBQUM7UUFDRCxNQUFNLFNBQVMsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQzFELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELE9BQU87WUFDTCxPQUFPLEVBQUUsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ3RGLENBQUM7SUFDSixDQUFDO0lBRUQsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDLENBQUM7QUFFRixlQUFlLFlBQVksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2V0RGF0ZVBhcnRzLCBpc1ZhbGlkRGF0ZX0gZnJvbSAnLi4vLi4vY29tbW9uJ1xuXG5jb25zdCBjb21wdXRlU3RhcnQgPSAoZGF0ZTogYW55KSA9PiB7XG4gIGxldCBzdGFydDogYW55ID0ge307XG5cbiAgaWYgKGRhdGUpIHtcbiAgICBpZiAoIWRhdGUub25EYXRlIHx8ICFpc1ZhbGlkRGF0ZShkYXRlLm9uRGF0ZS5kYXRlKSkge1xuICAgICAgc3RhcnQgPSBuZXcgRGF0ZSgpLnNldE1pbGxpc2Vjb25kcygwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnQgPSBkYXRlLm9uRGF0ZS5kYXRlO1xuICAgIH1cbiAgICBjb25zdCBkYXRlUGFydHMgPSBnZXREYXRlUGFydHMoc3RhcnQpO1xuICAgIGlmICghZGF0ZVBhcnRzLnllYXIgfHwgIWRhdGVQYXJ0cy5tb250aCB8fCAhZGF0ZVBhcnRzLmRheSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGR0c3RhcnQ6IG5ldyBEYXRlKERhdGUuVVRDKGRhdGVQYXJ0cy55ZWFyLCBkYXRlUGFydHMubW9udGggLSAxLCBkYXRlUGFydHMuZGF5LCAwLCAwKSlcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHN0YXJ0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29tcHV0ZVN0YXJ0O1xuIl19